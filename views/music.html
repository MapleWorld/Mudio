<!--Bootstrapped header -->
<!-- Header -->
<% include header.html %>

<!--Bootstrapped nav bar -->
<!-- Navigation -->
<% include navbar.html %>

<script>

$(document).ready(function() {
    music_data = <%- JSON.stringify(data[0]) %>;
    upload_audio(music_data);
    upload_sheet(music_data, 0);
    var value = parseInt($("#sheet").attr("value"));
    
    $("#prev-sheet").click(function() {
        value = value - 1;
        upload_sheet(music_data, value);
    });

    $("#next-sheet").click(function() {
        value = value + 1;
        upload_sheet(music_data, value);
    });

    $("#sheet").attr("value", value);
});

function upload_audio(data){
    var music_audio_data = data.audio;
    var audio_path = music_audio_data.split(",");
    var audio_ids = ["#audio1", "#audio2"];

    for (var i = 1; i < audio_path.length; i++){
    	console.log(audio_path[i - 1]);
    	add_audio(audio_path[i - 1], audio_ids[i - 1]);
    };
};

function upload_sheet(data, num){
    var music_sheet_data = data.sheets;
    var sheet_path = music_sheet_data.split(",");
    add_sheet(sheet_path[num], "#sheet");
}

function add_sheet(path, sheet_id){
	var content = "<img src=http://localhost:3000/load/" + path + " style='width:800px;height:800px;'>";
	$(sheet_id).html(content);
	console.log(sheet_id, content);
};

function add_audio(path, audio_id){
	var content = "<audio controls>";
	content += "<source src=http://localhost:3000/load/" + path + " type='audio/mpeg'>";
	content += "Your browser does not support the audio element.";
	content += "</audio>";
	
	$(audio_id).html(content);
};

</script>

<!-- Page Content -->
<div class="container">

	<div id="audio1"></div>

	<div id="audio2"></div>

	<h2> Rating: <%= data[0].rating %> </h2>
	
    <h2> Visitor: <%= data[0].visitor %> </h2>

    <div id="sheet" value="0"></div>

    <button id="prev-sheet">Prev</button>
    <button id="next-sheet">Next</button>

</div>

<!-- Bootstrapped Footer -->
<!-- Footer -->
<% include footer.html %>



	
